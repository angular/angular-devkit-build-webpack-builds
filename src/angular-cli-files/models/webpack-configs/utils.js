"use strict";
// tslint:disable
// TODO: cleanup this file, it's copied as is from Angular CLI.
Object.defineProperty(exports, "__esModule", { value: true });
const path = require("path");
exports.ngAppResolve = (resolvePath) => {
    return path.resolve(process.cwd(), resolvePath);
};
const webpackOutputOptions = {
    colors: true,
    hash: true,
    timings: true,
    chunks: true,
    chunkModules: false,
    children: false,
    modules: false,
    reasons: false,
    warnings: true,
    errors: true,
    assets: true,
    version: false,
    errorDetails: false,
    moduleTrace: false,
};
const verboseWebpackOutputOptions = {
    children: true,
    assets: true,
    version: true,
    reasons: true,
    chunkModules: false,
    errorDetails: true,
    moduleTrace: true,
};
function getWebpackStatsConfig(verbose = false) {
    return verbose
        ? Object.assign(webpackOutputOptions, verboseWebpackOutputOptions)
        : webpackOutputOptions;
}
exports.getWebpackStatsConfig = getWebpackStatsConfig;
// Filter extra entries out of a arran of extraEntries
function lazyChunksFilter(extraEntries) {
    return extraEntries
        .filter(extraEntry => extraEntry.lazy)
        .map(extraEntry => extraEntry.entry);
}
exports.lazyChunksFilter = lazyChunksFilter;
// convert all extra entries into the object representation, fill in defaults
function extraEntryParser(extraEntries, appRoot, defaultEntry) {
    return extraEntries
        .map((extraEntry) => typeof extraEntry === 'string' ? { input: extraEntry } : extraEntry)
        .map((extraEntry) => {
        extraEntry.path = path.resolve(appRoot, extraEntry.input);
        if (extraEntry.output) {
            extraEntry.entry = extraEntry.output.replace(/\.(js|css)$/i, '');
        }
        else if (extraEntry.lazy) {
            extraEntry.entry = extraEntry.input.replace(/\.(js|css|scss|sass|less|styl)$/i, '');
        }
        else {
            extraEntry.entry = defaultEntry;
        }
        return extraEntry;
    });
}
exports.extraEntryParser = extraEntryParser;
function getOutputHashFormat(option, length = 20) {
    /* tslint:disable:max-line-length */
    const hashFormats = {
        none: { chunk: '', extract: '', file: '', script: '' },
        media: { chunk: '', extract: '', file: `.[hash:${length}]`, script: '' },
        bundles: { chunk: `.[chunkhash:${length}]`, extract: `.[contenthash:${length}]`, file: '', script: `.[hash:${length}]` },
        all: { chunk: `.[chunkhash:${length}]`, extract: `.[contenthash:${length}]`, file: `.[hash:${length}]`, script: `.[hash:${length}]` },
    };
    /* tslint:enable:max-line-length */
    return hashFormats[option] || hashFormats['none'];
}
exports.getOutputHashFormat = getOutputHashFormat;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoidXRpbHMuanMiLCJzb3VyY2VSb290IjoiLi8iLCJzb3VyY2VzIjpbInBhY2thZ2VzL2FuZ3VsYXJfZGV2a2l0L2J1aWxkX3dlYnBhY2svc3JjL2FuZ3VsYXItY2xpLWZpbGVzL21vZGVscy93ZWJwYWNrLWNvbmZpZ3MvdXRpbHMudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IjtBQUFBLGlCQUFpQjtBQUNqQiwrREFBK0Q7O0FBRS9ELDZCQUE2QjtBQUVoQixRQUFBLFlBQVksR0FBRyxDQUFDLFdBQW1CLEVBQVUsRUFBRTtJQUMxRCxNQUFNLENBQUMsSUFBSSxDQUFDLE9BQU8sQ0FBQyxPQUFPLENBQUMsR0FBRyxFQUFFLEVBQUUsV0FBVyxDQUFDLENBQUM7QUFDbEQsQ0FBQyxDQUFDO0FBRUYsTUFBTSxvQkFBb0IsR0FBRztJQUMzQixNQUFNLEVBQUUsSUFBSTtJQUNaLElBQUksRUFBRSxJQUFJO0lBQ1YsT0FBTyxFQUFFLElBQUk7SUFDYixNQUFNLEVBQUUsSUFBSTtJQUNaLFlBQVksRUFBRSxLQUFLO0lBQ25CLFFBQVEsRUFBRSxLQUFLO0lBQ2YsT0FBTyxFQUFFLEtBQUs7SUFDZCxPQUFPLEVBQUUsS0FBSztJQUNkLFFBQVEsRUFBRSxJQUFJO0lBQ2QsTUFBTSxFQUFFLElBQUk7SUFDWixNQUFNLEVBQUUsSUFBSTtJQUNaLE9BQU8sRUFBRSxLQUFLO0lBQ2QsWUFBWSxFQUFFLEtBQUs7SUFDbkIsV0FBVyxFQUFFLEtBQUs7Q0FDbkIsQ0FBQztBQUVGLE1BQU0sMkJBQTJCLEdBQUc7SUFDbEMsUUFBUSxFQUFFLElBQUk7SUFDZCxNQUFNLEVBQUUsSUFBSTtJQUNaLE9BQU8sRUFBRSxJQUFJO0lBQ2IsT0FBTyxFQUFFLElBQUk7SUFDYixZQUFZLEVBQUUsS0FBSztJQUNuQixZQUFZLEVBQUUsSUFBSTtJQUNsQixXQUFXLEVBQUUsSUFBSTtDQUNsQixDQUFDO0FBRUYsK0JBQXNDLE9BQU8sR0FBRyxLQUFLO0lBQ25ELE1BQU0sQ0FBQyxPQUFPO1FBQ1osQ0FBQyxDQUFDLE1BQU0sQ0FBQyxNQUFNLENBQUMsb0JBQW9CLEVBQUUsMkJBQTJCLENBQUM7UUFDbEUsQ0FBQyxDQUFDLG9CQUFvQixDQUFDO0FBQzNCLENBQUM7QUFKRCxzREFJQztBQVVELHNEQUFzRDtBQUN0RCwwQkFBaUMsWUFBMEI7SUFDekQsTUFBTSxDQUFDLFlBQVk7U0FDaEIsTUFBTSxDQUFDLFVBQVUsQ0FBQyxFQUFFLENBQUMsVUFBVSxDQUFDLElBQUksQ0FBQztTQUNyQyxHQUFHLENBQUMsVUFBVSxDQUFDLEVBQUUsQ0FBQyxVQUFVLENBQUMsS0FBSyxDQUFDLENBQUM7QUFDekMsQ0FBQztBQUpELDRDQUlDO0FBRUQsNkVBQTZFO0FBQzdFLDBCQUNFLFlBQXFDLEVBQ3JDLE9BQWUsRUFDZixZQUFvQjtJQUVwQixNQUFNLENBQUMsWUFBWTtTQUNoQixHQUFHLENBQUMsQ0FBQyxVQUErQixFQUFFLEVBQUUsQ0FDdkMsT0FBTyxVQUFVLEtBQUssUUFBUSxDQUFDLENBQUMsQ0FBQyxFQUFFLEtBQUssRUFBRSxVQUFVLEVBQUUsQ0FBQyxDQUFDLENBQUMsVUFBVSxDQUFDO1NBQ3JFLEdBQUcsQ0FBQyxDQUFDLFVBQXNCLEVBQUUsRUFBRTtRQUM5QixVQUFVLENBQUMsSUFBSSxHQUFHLElBQUksQ0FBQyxPQUFPLENBQUMsT0FBTyxFQUFFLFVBQVUsQ0FBQyxLQUFLLENBQUMsQ0FBQztRQUMxRCxFQUFFLENBQUMsQ0FBQyxVQUFVLENBQUMsTUFBTSxDQUFDLENBQUMsQ0FBQztZQUN0QixVQUFVLENBQUMsS0FBSyxHQUFHLFVBQVUsQ0FBQyxNQUFNLENBQUMsT0FBTyxDQUFDLGNBQWMsRUFBRSxFQUFFLENBQUMsQ0FBQztRQUNuRSxDQUFDO1FBQUMsSUFBSSxDQUFDLEVBQUUsQ0FBQyxDQUFDLFVBQVUsQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDO1lBQzNCLFVBQVUsQ0FBQyxLQUFLLEdBQUcsVUFBVSxDQUFDLEtBQUssQ0FBQyxPQUFPLENBQUMsa0NBQWtDLEVBQUUsRUFBRSxDQUFDLENBQUM7UUFDdEYsQ0FBQztRQUFDLElBQUksQ0FBQyxDQUFDO1lBQ04sVUFBVSxDQUFDLEtBQUssR0FBRyxZQUFZLENBQUM7UUFDbEMsQ0FBQztRQUNELE1BQU0sQ0FBQyxVQUFVLENBQUM7SUFDcEIsQ0FBQyxDQUFDLENBQUM7QUFDUCxDQUFDO0FBbkJELDRDQW1CQztBQVNELDZCQUFvQyxNQUFjLEVBQUUsTUFBTSxHQUFHLEVBQUU7SUFDN0Qsb0NBQW9DO0lBQ3BDLE1BQU0sV0FBVyxHQUFxQztRQUNwRCxJQUFJLEVBQUssRUFBRSxLQUFLLEVBQUUsRUFBRSxFQUF3QixPQUFPLEVBQUUsRUFBRSxFQUEwQixJQUFJLEVBQUUsRUFBRSxFQUFtQixNQUFNLEVBQUUsRUFBRSxFQUFFO1FBQ3hILEtBQUssRUFBSSxFQUFFLEtBQUssRUFBRSxFQUFFLEVBQXdCLE9BQU8sRUFBRSxFQUFFLEVBQTBCLElBQUksRUFBRSxVQUFVLE1BQU0sR0FBRyxFQUFFLE1BQU0sRUFBRSxFQUFFLEVBQUc7UUFDekgsT0FBTyxFQUFFLEVBQUUsS0FBSyxFQUFFLGVBQWUsTUFBTSxHQUFHLEVBQUUsT0FBTyxFQUFFLGlCQUFpQixNQUFNLEdBQUcsRUFBRSxJQUFJLEVBQUUsRUFBRSxFQUFtQixNQUFNLEVBQUUsVUFBVSxNQUFNLEdBQUcsRUFBRztRQUMxSSxHQUFHLEVBQU0sRUFBRSxLQUFLLEVBQUUsZUFBZSxNQUFNLEdBQUcsRUFBRSxPQUFPLEVBQUUsaUJBQWlCLE1BQU0sR0FBRyxFQUFFLElBQUksRUFBRSxVQUFVLE1BQU0sR0FBRyxFQUFFLE1BQU0sRUFBRSxVQUFVLE1BQU0sR0FBRyxFQUFHO0tBQzNJLENBQUM7SUFDRixtQ0FBbUM7SUFDbkMsTUFBTSxDQUFDLFdBQVcsQ0FBQyxNQUFNLENBQUMsSUFBSSxXQUFXLENBQUMsTUFBTSxDQUFDLENBQUM7QUFDcEQsQ0FBQztBQVZELGtEQVVDIiwic291cmNlc0NvbnRlbnQiOlsiLy8gdHNsaW50OmRpc2FibGVcbi8vIFRPRE86IGNsZWFudXAgdGhpcyBmaWxlLCBpdCdzIGNvcGllZCBhcyBpcyBmcm9tIEFuZ3VsYXIgQ0xJLlxuXG5pbXBvcnQgKiBhcyBwYXRoIGZyb20gJ3BhdGgnO1xuXG5leHBvcnQgY29uc3QgbmdBcHBSZXNvbHZlID0gKHJlc29sdmVQYXRoOiBzdHJpbmcpOiBzdHJpbmcgPT4ge1xuICByZXR1cm4gcGF0aC5yZXNvbHZlKHByb2Nlc3MuY3dkKCksIHJlc29sdmVQYXRoKTtcbn07XG5cbmNvbnN0IHdlYnBhY2tPdXRwdXRPcHRpb25zID0ge1xuICBjb2xvcnM6IHRydWUsXG4gIGhhc2g6IHRydWUsIC8vIHJlcXVpcmVkIGJ5IGN1c3RvbSBzdGF0IG91dHB1dFxuICB0aW1pbmdzOiB0cnVlLCAvLyByZXF1aXJlZCBieSBjdXN0b20gc3RhdCBvdXRwdXRcbiAgY2h1bmtzOiB0cnVlLCAvLyByZXF1aXJlZCBieSBjdXN0b20gc3RhdCBvdXRwdXRcbiAgY2h1bmtNb2R1bGVzOiBmYWxzZSxcbiAgY2hpbGRyZW46IGZhbHNlLCAvLyBsaXN0aW5nIGFsbCBjaGlsZHJlbiBpcyB2ZXJ5IG5vaXN5IGluIEFPVCBhbmQgaGlkZXMgd2FybmluZ3MvZXJyb3JzXG4gIG1vZHVsZXM6IGZhbHNlLFxuICByZWFzb25zOiBmYWxzZSxcbiAgd2FybmluZ3M6IHRydWUsXG4gIGVycm9yczogdHJ1ZSxcbiAgYXNzZXRzOiB0cnVlLCAvLyByZXF1aXJlZCBieSBjdXN0b20gc3RhdCBvdXRwdXRcbiAgdmVyc2lvbjogZmFsc2UsXG4gIGVycm9yRGV0YWlsczogZmFsc2UsXG4gIG1vZHVsZVRyYWNlOiBmYWxzZSxcbn07XG5cbmNvbnN0IHZlcmJvc2VXZWJwYWNrT3V0cHV0T3B0aW9ucyA9IHtcbiAgY2hpbGRyZW46IHRydWUsXG4gIGFzc2V0czogdHJ1ZSxcbiAgdmVyc2lvbjogdHJ1ZSxcbiAgcmVhc29uczogdHJ1ZSxcbiAgY2h1bmtNb2R1bGVzOiBmYWxzZSwgLy8gVE9ETzogc2V0IHRvIHRydWUgd2hlbiBjb25zb2xlIHRvIGZpbGUgb3V0cHV0IGlzIGZpeGVkXG4gIGVycm9yRGV0YWlsczogdHJ1ZSxcbiAgbW9kdWxlVHJhY2U6IHRydWUsXG59O1xuXG5leHBvcnQgZnVuY3Rpb24gZ2V0V2VicGFja1N0YXRzQ29uZmlnKHZlcmJvc2UgPSBmYWxzZSkge1xuICByZXR1cm4gdmVyYm9zZVxuICAgID8gT2JqZWN0LmFzc2lnbih3ZWJwYWNrT3V0cHV0T3B0aW9ucywgdmVyYm9zZVdlYnBhY2tPdXRwdXRPcHRpb25zKVxuICAgIDogd2VicGFja091dHB1dE9wdGlvbnM7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgRXh0cmFFbnRyeSB7XG4gIGlucHV0OiBzdHJpbmc7XG4gIG91dHB1dD86IHN0cmluZztcbiAgbGF6eT86IGJvb2xlYW47XG4gIHBhdGg/OiBzdHJpbmc7XG4gIGVudHJ5Pzogc3RyaW5nO1xufVxuXG4vLyBGaWx0ZXIgZXh0cmEgZW50cmllcyBvdXQgb2YgYSBhcnJhbiBvZiBleHRyYUVudHJpZXNcbmV4cG9ydCBmdW5jdGlvbiBsYXp5Q2h1bmtzRmlsdGVyKGV4dHJhRW50cmllczogRXh0cmFFbnRyeVtdKSB7XG4gIHJldHVybiBleHRyYUVudHJpZXNcbiAgICAuZmlsdGVyKGV4dHJhRW50cnkgPT4gZXh0cmFFbnRyeS5sYXp5KVxuICAgIC5tYXAoZXh0cmFFbnRyeSA9PiBleHRyYUVudHJ5LmVudHJ5KTtcbn1cblxuLy8gY29udmVydCBhbGwgZXh0cmEgZW50cmllcyBpbnRvIHRoZSBvYmplY3QgcmVwcmVzZW50YXRpb24sIGZpbGwgaW4gZGVmYXVsdHNcbmV4cG9ydCBmdW5jdGlvbiBleHRyYUVudHJ5UGFyc2VyKFxuICBleHRyYUVudHJpZXM6IChzdHJpbmcgfCBFeHRyYUVudHJ5KVtdLFxuICBhcHBSb290OiBzdHJpbmcsXG4gIGRlZmF1bHRFbnRyeTogc3RyaW5nXG4pOiBFeHRyYUVudHJ5W10ge1xuICByZXR1cm4gZXh0cmFFbnRyaWVzXG4gICAgLm1hcCgoZXh0cmFFbnRyeTogc3RyaW5nIHwgRXh0cmFFbnRyeSkgPT5cbiAgICAgIHR5cGVvZiBleHRyYUVudHJ5ID09PSAnc3RyaW5nJyA/IHsgaW5wdXQ6IGV4dHJhRW50cnkgfSA6IGV4dHJhRW50cnkpXG4gICAgLm1hcCgoZXh0cmFFbnRyeTogRXh0cmFFbnRyeSkgPT4ge1xuICAgICAgZXh0cmFFbnRyeS5wYXRoID0gcGF0aC5yZXNvbHZlKGFwcFJvb3QsIGV4dHJhRW50cnkuaW5wdXQpO1xuICAgICAgaWYgKGV4dHJhRW50cnkub3V0cHV0KSB7XG4gICAgICAgIGV4dHJhRW50cnkuZW50cnkgPSBleHRyYUVudHJ5Lm91dHB1dC5yZXBsYWNlKC9cXC4oanN8Y3NzKSQvaSwgJycpO1xuICAgICAgfSBlbHNlIGlmIChleHRyYUVudHJ5LmxhenkpIHtcbiAgICAgICAgZXh0cmFFbnRyeS5lbnRyeSA9IGV4dHJhRW50cnkuaW5wdXQucmVwbGFjZSgvXFwuKGpzfGNzc3xzY3NzfHNhc3N8bGVzc3xzdHlsKSQvaSwgJycpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgZXh0cmFFbnRyeS5lbnRyeSA9IGRlZmF1bHRFbnRyeTtcbiAgICAgIH1cbiAgICAgIHJldHVybiBleHRyYUVudHJ5O1xuICAgIH0pO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIEhhc2hGb3JtYXQge1xuICBjaHVuazogc3RyaW5nO1xuICBleHRyYWN0OiBzdHJpbmc7XG4gIGZpbGU6IHN0cmluZztcbiAgc2NyaXB0OiBzdHJpbmc7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBnZXRPdXRwdXRIYXNoRm9ybWF0KG9wdGlvbjogc3RyaW5nLCBsZW5ndGggPSAyMCk6IEhhc2hGb3JtYXQge1xuICAvKiB0c2xpbnQ6ZGlzYWJsZTptYXgtbGluZS1sZW5ndGggKi9cbiAgY29uc3QgaGFzaEZvcm1hdHM6IHsgW29wdGlvbjogc3RyaW5nXTogSGFzaEZvcm1hdCB9ID0ge1xuICAgIG5vbmU6ICAgIHsgY2h1bms6ICcnLCAgICAgICAgICAgICAgICAgICAgICAgZXh0cmFjdDogJycsICAgICAgICAgICAgICAgICAgICAgICAgIGZpbGU6ICcnICAgICAgICAgICAgICAgICAsIHNjcmlwdDogJycgfSxcbiAgICBtZWRpYTogICB7IGNodW5rOiAnJywgICAgICAgICAgICAgICAgICAgICAgIGV4dHJhY3Q6ICcnLCAgICAgICAgICAgICAgICAgICAgICAgICBmaWxlOiBgLltoYXNoOiR7bGVuZ3RofV1gLCBzY3JpcHQ6ICcnICB9LFxuICAgIGJ1bmRsZXM6IHsgY2h1bms6IGAuW2NodW5raGFzaDoke2xlbmd0aH1dYCwgZXh0cmFjdDogYC5bY29udGVudGhhc2g6JHtsZW5ndGh9XWAsIGZpbGU6ICcnICAgICAgICAgICAgICAgICAsIHNjcmlwdDogYC5baGFzaDoke2xlbmd0aH1dYCAgfSxcbiAgICBhbGw6ICAgICB7IGNodW5rOiBgLltjaHVua2hhc2g6JHtsZW5ndGh9XWAsIGV4dHJhY3Q6IGAuW2NvbnRlbnRoYXNoOiR7bGVuZ3RofV1gLCBmaWxlOiBgLltoYXNoOiR7bGVuZ3RofV1gLCBzY3JpcHQ6IGAuW2hhc2g6JHtsZW5ndGh9XWAgIH0sXG4gIH07XG4gIC8qIHRzbGludDplbmFibGU6bWF4LWxpbmUtbGVuZ3RoICovXG4gIHJldHVybiBoYXNoRm9ybWF0c1tvcHRpb25dIHx8IGhhc2hGb3JtYXRzWydub25lJ107XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgQXNzZXRQYXR0ZXJuIHtcbiAgZ2xvYjogc3RyaW5nO1xuICBpbnB1dD86IHN0cmluZztcbiAgb3V0cHV0Pzogc3RyaW5nO1xuICBhbGxvd091dHNpZGVPdXREaXI/OiBib29sZWFuO1xufVxuIl19